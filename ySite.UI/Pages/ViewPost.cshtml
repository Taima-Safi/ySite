@page
@model ySite.UI.Pages.ViewPostModel
@{
    ViewData["Title"] = "View Posts";
}
<h1>User Posts</h1>
<!-- Previous HTML content -->

<div id="postsContainer">
    <div>
        <!-- Content to be populated by fetched posts -->
    </div>
</div>

<script>
    const storedToken = localStorage.getItem('authToken');

    if (storedToken) {
        const headers = {
            'Content-Type': 'application/json',
            'Authorization': `Bearer ${storedToken}`
        };

        // Make a request to fetch posts for a specific user
        fetch('http://localhost:5080/api/Posts', {
            headers: headers // Pass the headers in the fetch request
        })
            .then(response => response.json())
            .then(data => {
                const postsContainer = document.getElementById('postsContainer');

                // Assuming data is an array of objects with description and image properties
                // Iterate over each post and create HTML elements to display the description and image
                data.forEach(post => {
                    const description = post.Description;
                    const imageURL = post.Image;

                    const postElement = document.createElement('div');
                    postElement.classList.add('post');

                    const descriptionElement = document.createElement('p');
                    descriptionElement.textContent = description;

                    const imageElement = document.createElement('img');
                    imageElement.src = imageURL;
                    imageElement.alt = 'Post Image';

                    // Append the elements to the post container
                    postElement.appendChild(descriptionElement);
                    postElement.appendChild(imageElement);
                    postsContainer.appendChild(postElement);
                });
            })
            .catch(error => {
                // Handle errors if any
                console.error('Error fetching posts:', error);
            });
    }
</script>

<!-- Rest of the HTML content -->
