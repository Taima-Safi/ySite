@page
@*
@model ySite.UI.Pages.Post.Post
*@
@{
    ViewData["Title"] = "Post";
}
<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <!-- Other navigation items -->

    <ul class="navbar-nav ml-auto">
        <!-- Other navigation items -->
        <li class="nav-item">
            <a class="nav-link text-dark" asp-area="" asp-page="/Post/DeletePost">Delete</a>
        </li>
        <!-- Move AddPost link to the bottom -->
        <li class="nav-item">
            <a class="nav-link text-dark" asp-area="" asp-page="/Post/AddPost"
               style="color: blue; margin-top: auto;">AddPost</a>
        </li>
    </ul>
</nav>
<h1>User Posts</h1>
<div id="message"></div>
<table id="postsTable">
  <thead>
    <tr>
      <th>Description</th>
      <!-- Add more table headers for other properties -->
    </tr>
  </thead>
  <tbody id="postsBody">
    <!-- Data will be dynamically added here -->
  </tbody>
</table>

    <script>
        // Fetch data from the API endpoint
    fetch('http://localhost:5080/api/Posts')
        .then(response => response.json())
        .then(data => {
            if (data && Array.isArray(data.posts)) {
                const messageContainer = document.getElementById('message');
                const postsBody = document.getElementById('postsBody');

                // Display the message if it exists
                if (data.message) {
                    messageContainer.innerText = data.message;
                }

                // Display posts in the table
                data.posts.forEach(post => {
                    const description = post.description || 'No Description';
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${description}</td>
                        <!-- Add more table cells for other properties -->
                    `;
                    postsBody.appendChild(row);
                });
            } else {
                console.error('Posts data is not in the expected format.');
            }
        })
        .catch(error => {
            console.error('Error fetching posts:', error);
        });

    </script>
